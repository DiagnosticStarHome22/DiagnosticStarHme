<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Your Page</title>
</head>

<body>

    <section id="download" class="s-download target-section">
        <div class="row section-header align-center" data-aos="fade-up">
            <div class="col-full">
                <h1 class="display-1">
                    Join Our Community of 3,000,000+ Users.
                </h1>
                <p class="lead">
                    Et nihil atque ex. Reiciendis et rerum ut voluptate. Omnis molestiae nemo est.
                    Ut quis enim rerum quia assumenda repudiandae non cumque qui. Amet repellat
                    omnis ea.
                </p>
            </div>
        </div> <!-- end section-header -->

        <div class="row">
            <div class="col-full text-center">
                <!-- إضافة input لاختيار الصورة -->
                <input type="file" accept="image/*" id="imageInput" style="display: none;">
                <!-- زر لتحميل الصورة -->
                <button onclick="openImageUploader()">تحميل الصورة</button>
                <!-- زر لتحميل الصورة المحفوظة -->
                <button onclick="downloadUploadedImage()">تحميل الصورة المحفوظة</button>
                <!-- زر لإنشاء ملف نصي -->
                <button onclick="createTxtFile()">إنشاء ملف نصي</button>
                <!-- زر لكتابة موقع الصورة في ملف نصي -->
                <button id="writeButton" onclick="writeImageUrlToTxt()">كتابة موقع الصورة في ملف نصي</button>
                <!-- زر لفتح الصورة المحفوظة -->
                <button onclick="openSavedImage()">فتح الصورة المحفوظة</button>
                <!-- زر لفتح موقع الصورة المحفوظة -->
                <button onclick="openSavedImageUrl()">فتح موقع الصورة المحفوظة</button>
            </div>
        </div>

        <div class="row download-bottom-image" data-aos="fade-up">
            <img id="downloadedImage" alt="Downloaded Image">
        </div>
    </section> <!-- end s-download -->

    <script>
        var uploadedImage; // سيتم تعيين هذا الكائن عند رفع الصورة

        function openImageUploader() {
            var imageInput = document.getElementById("imageInput");

            imageInput.addEventListener('change', function () {
                handleImageUpload(imageInput.files[0]);
                imageInput.value = null;
            });

            imageInput.click();
        }

        function handleImageUpload(imageFile) {
            var imgElement = document.getElementById("downloadedImage");
            var imageUrl = URL.createObjectURL(imageFile);
            imgElement.src = imageUrl;

            // حفظ الصورة المرفوعة في localStorage
            uploadedImage = imageFile;
            saveImageUrlToLocalStorage(imageUrl);

            // رفع الصورة إلى موقع Netlify Drop
            uploadImageToNetlifyDrop(imageFile);

            alert('تم تحميل الصورة بنجاح!');
        }

        function uploadImageToNetlifyDrop(imageFile) {
            var formData = new FormData();
            formData.append('file', imageFile);

            // قم بتحميل الصورة عبر Netlify Drop
            fetch('https://api.netlify.com/api/v1/sites/YOUR_NETLIFY_SITE_ID/drops', {
                method: 'POST',
                body: formData,
                headers: {
                    'Authorization': 'Bearer YOUR_NETLIFY_ACCESS_TOKEN'
                }
            })
                .then(response => response.json())
                .then(data => {
                    console.log('Netlify Drop Response:', data);
                })
                .catch(error => {
                    console.error('Error:', error);
                });
        }

            // المزيد من الوظائف هنا...

    </script>

</body>

</html>
